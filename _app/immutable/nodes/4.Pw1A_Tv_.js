import{s as $,e as w,t as P,a as L,b,d as k,o as V,h as m,f as F,i as f,j,k as c,r as G,p as T,n as Y,v as M,g as U,w as R}from"../chunks/scheduler.BsZpeh6m.js";import{S as O,i as z}from"../chunks/index.Bu-wHBV3.js";function A(r){let e,s="Loading...";return{c(){e=w("p"),e.textContent=s,this.h()},l(t){e=b(t,"P",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-qdsr2u"&&(e.textContent=s),this.h()},h(){f(e,"class","svelte-epiccg")},m(t,o){j(t,e,o)},p:Y,d(t){t&&m(e)}}}function H(r){let e,s="Click the button to load a comic.";return{c(){e=w("p"),e.textContent=s,this.h()},l(t){e=b(t,"P",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-8ranae"&&(e.textContent=s),this.h()},h(){f(e,"class","svelte-epiccg")},m(t,o){j(t,e,o)},p:Y,d(t){t&&m(e)}}}function J(r){let e,s,t=r[0].safe_title+"",o,_,n,C,h,g,d,E,p=new Date(r[0].year,r[0].month-1,r[0].day).toLocaleDateString()+"",a,i,l,y,D=new Date().getFullYear()-r[0].year+"",I,q;return{c(){e=w("div"),s=w("div"),o=P(t),_=L(),n=w("img"),g=L(),d=w("div"),E=P("Published on: "),a=P(p),i=L(),l=w("div"),y=P("Published since: "),I=P(D),q=P(`
                    Years`),this.h()},l(v){e=b(v,"DIV",{id:!0,class:!0});var u=k(e);s=b(u,"DIV",{class:!0});var B=k(s);o=V(B,t),B.forEach(m),_=F(u),n=b(u,"IMG",{src:!0,alt:!0,class:!0}),g=F(u),d=b(u,"DIV",{class:!0});var N=k(d);E=V(N,"Published on: "),a=V(N,p),N.forEach(m),i=F(u),l=b(u,"DIV",{class:!0});var S=k(l);y=V(S,"Published since: "),I=V(S,D),q=V(S,`
                    Years`),S.forEach(m),u.forEach(m),this.h()},h(){f(s,"class","comic-title svelte-epiccg"),R(n.src,C=r[0].img)||f(n,"src",C),f(n,"alt",h=r[0].alt),f(n,"class","svelte-epiccg"),f(d,"class","comic-date svelte-epiccg"),f(l,"class","since svelte-epiccg"),f(e,"id","comic"),f(e,"class","svelte-epiccg")},m(v,u){j(v,e,u),c(e,s),c(s,o),c(e,_),c(e,n),c(e,g),c(e,d),c(d,E),c(d,a),c(e,i),c(e,l),c(l,y),c(l,I),c(l,q)},p(v,u){u&1&&t!==(t=v[0].safe_title+"")&&T(o,t),u&1&&!R(n.src,C=v[0].img)&&f(n,"src",C),u&1&&h!==(h=v[0].alt)&&f(n,"alt",h),u&1&&p!==(p=new Date(v[0].year,v[0].month-1,v[0].day).toLocaleDateString()+"")&&T(a,p),u&1&&D!==(D=new Date().getFullYear()-v[0].year+"")&&T(I,D)},d(v){v&&m(e)}}}function K(r){let e,s,t,o=r[2]?"Loading...":"Fetch Comic",_,n,C,h,g,d;function E(i,l){return i[1]&&i[0]?J:!i[1]&&!i[2]?H:A}let p=E(r),a=p(r);return{c(){e=w("div"),s=w("div"),t=w("button"),_=P(o),n=L(),C=L(),h=w("div"),a.c(),this.h()},l(i){e=b(i,"DIV",{class:!0});var l=k(e);s=b(l,"DIV",{class:!0});var y=k(s);t=b(y,"BUTTON",{class:!0});var D=k(t);_=V(D,o),D.forEach(m),n=F(y),y.forEach(m),C=F(l),h=b(l,"DIV",{class:!0});var I=k(h);a.l(I),I.forEach(m),l.forEach(m),this.h()},h(){f(t,"class","showBtn svelte-epiccg"),t.disabled=r[2],f(s,"class","comic-container svelte-epiccg"),f(h,"class","comic-container svelte-epiccg"),f(e,"class","comic svelte-epiccg")},m(i,l){j(i,e,l),c(e,s),c(s,t),c(t,_),c(s,n),c(e,C),c(e,h),a.m(h,null),g||(d=G(t,"click",r[3]),g=!0)},p(i,[l]){l&4&&o!==(o=i[2]?"Loading...":"Fetch Comic")&&T(_,o),l&4&&(t.disabled=i[2]),p===(p=E(i))&&a?a.p(i,l):(a.d(1),a=p(i),a&&(a.c(),a.m(h,null)))},i:Y,o:Y,d(i){i&&m(e),a.d(),g=!1,d()}}}function Q(r,e,s){const t=M();let o=null,_=!1,n=!1;async function C(){const g="a.alimi@innopolis.university";try{s(2,n=!0);const d=await fetch(`https://fwd.innopolis.university/api/hw2?email=${encodeURIComponent(g)}`);if(!d.ok)throw new Error(`Network response was not ok: ${d.statusText}`);const p=await d.json();if(!p)throw new Error("Comic ID not found in the response");const a=await fetch(`https://fwd.innopolis.university/api/comic?id=${p}`);if(!a.ok)throw new Error(`Network response was not ok: ${a.statusText}`);if(s(0,o=await a.json()),o)h(o);else throw new Error("Comic data not found in the response")}catch(d){console.error("Error fetching comic:",d),d="Failed to fetch comic."}finally{s(2,n=!1)}}function h(g){t("comicLoaded",{comic:g}),s(1,_=!0)}return[o,_,n,C]}class Z extends O{constructor(e){super(),z(this,e,Q,K,$,{})}}export{Z as component};
